<!DOCTYPE html>
<html lang = "pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Página administrativa para controle e verificação de usuários">
    <meta name="author" content="Nicolas Alves Araujo">
    <title>Lista de usuários</title>
  </head>
  
  <body>
    <h1>Usuários</h1>
    <table id="userTable">
      <thead>
        <tr>
          <th>Nome</th>
          <th>ID</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h1>Acervo</h1>
    <table id="acervoTable">
      <thead>
        <tr>
          <th>Título</th>
          <th>Autor</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <script>
      // Configuração do seu Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyA2T2ImasyoRPG4tYxMsAHoaZNKUYe4oUY",
        authDomain: "tcc-biblioteca-hascaralho.firebaseapp.com",
        databaseURL: https://tcc-biblioteca-hascaralho-default-rtdb.firebaseio.com",
        projectId: "tcc-biblioteca-hascaralho",
        storageBucket: "tcc-biblioteca-hascaralho.firebasestorage.app",
        messagingSenderId: "311752472947",
        appId: "1:311752472947:web:64d37351c8e173251e6d06"
      };

    // Inicializa o Firebase
      firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Referência para os dados
        const userRef = db.ref('"Usuário"');
      ' const acervoRef = db.ref('Acervo');

    // Atualiza tabela de usuários
    userRef.on('value', snapshot => {
      const users = snapshot.val();
      const userTable = document.querySelector('#userTable tbody');
      userTable.innerHTML = ''; // Limpa antes de inserir

      for (const key in users) {
        const user = users[key];
        const row = document.createElement('tr');
        row.innerHTML = `<td>${user.nome}</td><td>${user.ID}</td>`;
        userTable.appendChild(row);
      }
    });

    // Atualiza tabela de acervo
    acervoRef.on('value', snapshot => {
      const livros = snapshot.val();
      const acervoTable = document.querySelector('#acervoTable tbody');
      acervoTable.innerHTML = ''; // Limpa antes de inserir

      for (const key in livros) {
        const livro = livros[key];
        const row = document.createElement('tr');
        row.innerHTML = `<td>${livro.titulo}</td><td>${livro.autor}</td>`;
        acervoTable.appendChild(row);
      }
    });
  </script>

</body>
</html>
